@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=ZCOOL+QingKe+HuangYou&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 222 47% 11%;
    --foreground: 210 40% 98%;

    --card: 222 47% 13%;
    --card-foreground: 210 40% 98%;

    --popover: 222 47% 11%;
    --popover-foreground: 210 40% 98%;

    --primary: 196 100% 50%;
    --primary-foreground: 0 0% 100%;

    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;

    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 13% 69%; /* 更亮的灰色，提升对比度 (约 #94a3b8) */

    --accent: 196 100% 50%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 62.8% 60.6%;
    --destructive-foreground: 210 40% 98%;

    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 196 100% 50%;

    --radius: 0.5rem;

    --sidebar-background: 222 47% 8%;
    --sidebar-foreground: 210 40% 98%;
    --sidebar-primary: 196 100% 50%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 196 100% 26%;
    --sidebar-accent-foreground: 0 0% 100%;
    --sidebar-border: 217.2 32.6% 17.5%;
    --sidebar-ring: 196 100% 50%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-cyber-bg text-cyber-text;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft YaHei", "PingFang SC", "Hiragino Sans GB", "Helvetica Neue", Arial, sans-serif;
    font-size: 15px;
    line-height: 1.6;
    letter-spacing: 0.01em;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
    overscroll-behavior: none;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* 改善基础文字可读性 */
  p, span, div, li, td, th, label {
    color: #e2e8f0;
    line-height: 1.65;
  }

  /* 标题样式 */
  h1, h2, h3, h4, h5, h6 {
    @apply font-cyber tracking-wider;
    color: #ffffff;
    line-height: 1.4;
    font-weight: 600;
  }

  h1 { font-size: 2rem; }
  h2 { font-size: 1.75rem; }
  h3 { font-size: 1.5rem; }
  h4 { font-size: 1.25rem; }
  h5 { font-size: 1.125rem; }
  h6 { font-size: 1rem; }

  /* 改善小文字可读性 */
  .text-xs, [class*="text-xs"] {
    font-size: 0.8125rem; /* 13px */
    line-height: 1.5;
    color: #cbd5e1;
  }

  .text-sm, [class*="text-sm"] {
    font-size: 0.9375rem; /* 15px */
    line-height: 1.6;
    color: #e2e8f0;
  }

  /* 改善 muted 文字对比度 */
  .text-muted, .text-cyber-muted, [class*="text-muted"] {
    color: #94a3b8 !important; /* 更亮的灰色，对比度更好 */
  }

  /* 表格文字可读性 */
  table {
    font-size: 0.9375rem;
    line-height: 1.65;
  }

  th {
    color: #e2e8f0;
    font-weight: 600;
  }

  td {
    color: #cbd5e1;
  }

  /* 按钮文字 */
  button {
    font-size: 0.9375rem;
    line-height: 1.5;
    font-weight: 500;
  }

  /* 输入框文字 */
  input, textarea, select {
    font-size: 0.9375rem;
    line-height: 1.5;
    color: #e2e8f0;
  }

  input::placeholder, textarea::placeholder {
    color: #94a3b8;
    opacity: 0.8;
  }

  /* 链接文字 */
  a {
    color: #60a5fa;
    transition: color 0.2s;
  }

  a:hover {
    color: #3b82f6;
  }

  /* 改善卡片内文字 */
  .cyber-card, .card, [class*="card"] {
    color: #e2e8f0;
  }

  /* 改善列表文字 */
  ul, ol {
    line-height: 1.8;
  }

  li {
    margin-bottom: 0.25rem;
  }

  /* 改善对话框和模态框文字 */
  [role="dialog"], [role="alertdialog"], dialog, .dialog {
    color: #e2e8f0;
  }

  [role="dialog"] p, [role="alertdialog"] p, dialog p, .dialog p {
    line-height: 1.7;
    color: #cbd5e1;
  }

  /* 改善标签文字 */
  label {
    font-weight: 500;
    color: #e2e8f0;
    font-size: 0.9375rem;
  }

  /* 改善描述性文字 */
  .description, [class*="description"] {
    color: #cbd5e1;
    line-height: 1.7;
  }

  /* 改善代码和等宽文字 */
  code, kbd, samp, pre {
    font-family: 'Courier New', Courier, monospace;
    font-size: 0.875rem;
    color: #e2e8f0;
    background-color: rgba(30, 41, 59, 0.5);
    padding: 0.125rem 0.375rem;
    border-radius: 0.25rem;
  }

  /* 改善徽章和状态文字 */
  .badge, [class*="badge"] {
    font-weight: 500;
    font-size: 0.8125rem;
  }

  /* 改善表格标题单元格 */
  .cyber-table th {
    font-size: 0.875rem;
    font-weight: 600;
    color: #e2e8f0;
  }

  /* 改善表格数据单元格 */
  .cyber-table td {
    font-size: 0.9375rem;
    color: #cbd5e1;
    line-height: 1.65;
  }

  /* 响应式：移动端字体稍微增大 */
  @media (max-width: 640px) {
    body {
      font-size: 16px;
    }
    
    .text-xs {
      font-size: 0.875rem; /* 14px on mobile */
    }
    
    .text-sm {
      font-size: 1rem; /* 16px on mobile */
    }
  }
  
  button, a, input, select, textarea {
    @apply focus:outline-none;
  }
  
  @media (max-width: 640px) {
    button, a {
      @apply min-h-[44px] min-w-[44px];
    }
  }
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-cyber-bg;
}

::-webkit-scrollbar-thumb {
  @apply bg-cyber-accent/50 rounded-full;
  border: 2px solid transparent;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-cyber-accent;
}

@layer components {
  .cyber-panel {
    @apply bg-card bg-opacity-60 backdrop-blur-sm border border-cyber-accent/30 rounded-md overflow-hidden relative;
  }
  
  .cyber-panel::before {
    content: '';
    @apply absolute inset-0 bg-gradient-to-r from-cyber-accent/5 to-cyber-neon/5 opacity-30 pointer-events-none;
  }
  
  .cyber-panel::after {
    content: '';
    @apply absolute h-[1px] w-full left-0 top-0 bg-gradient-to-r from-transparent via-cyber-accent to-transparent pointer-events-none;
  }
  
  .cyber-button {
    @apply relative px-3 py-2 rounded-md text-sm font-medium
           bg-slate-800/50 border border-slate-700/50 text-slate-200
           hover:bg-slate-700/50 hover:border-slate-600/50 hover:text-white
           active:scale-[0.97]
           transition-all duration-150 ease-out
           disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:scale-100;
  }
  
  .cyber-input {
    @apply bg-cyber-bg border border-cyber-grid focus:border-cyber-accent/70 focus:shadow-neon-inner
           px-3 py-2 rounded-sm text-cyber-text placeholder:text-cyber-muted outline-none;
  }
  
  .cyber-card {
    @apply cyber-panel p-4;
  }
  
  .cyber-grid-bg {
    background-image: 
      linear-gradient(to right, rgba(30, 42, 58, 0.3) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(30, 42, 58, 0.3) 1px, transparent 1px);
    background-size: 20px 20px;
  }
  
  .cyber-scan {
    @apply relative overflow-hidden;
  }
  
  .cyber-scan::after {
    content: '';
    @apply absolute inset-0 animate-scanning opacity-30;
  }
  
  .cyber-glow-text {
    @apply text-cyber-accent drop-shadow-[0_0_2px_rgba(0,179,254,0.8)];
  }
  
  .cyber-grid-line {
    @apply border-t border-cyber-grid;
  }
  
  .cyber-gradient-border {
    @apply relative;
  }
  
  .cyber-gradient-border::before {
    content: '';
    @apply absolute inset-0 rounded-lg p-[1px] bg-gradient-to-r from-cyber-accent via-cyber-neon to-cyber-neon-alt -z-10;
    mask: 
      linear-gradient(#fff 0 0) content-box,
      linear-gradient(#fff 0 0);
    mask-composite: exclude;
  }

  .cyber-table th {
    @apply uppercase text-xs font-cyber text-cyber-accent/80 border-b border-cyber-accent/20 pb-2;
  }
  
  .cyber-table td {
    @apply py-3 border-b border-cyber-grid;
  }
  
  .cyber-badge {
    @apply inline-flex items-center rounded-full border border-cyber-accent/30 px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-cyber-accent bg-cyber-bg;
  }
  
  .status-available {
    @apply text-green-400 animate-pulse;
  }
  
  .status-unavailable {
    @apply text-red-400;
  }
  
  .status-unknown {
    @apply text-yellow-400;
  }
  
  .mobile-menu-item {
    @apply relative flex items-center px-3 py-3 rounded-md transition-all;
  }
  
  .mobile-touch-feedback {
    @apply active:bg-cyber-accent/20 transition-colors duration-150;
  }
  
  .mobile-bottom-safe-area {
    padding-bottom: env(safe-area-inset-bottom, 0);
  }
  
  .mobile-top-safe-area {
    padding-top: env(safe-area-inset-top, 0);
  }

  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;  /* Chrome, Safari and Opera */
  }

  /* Dialog styling */
  .cyber-dialog {
    @apply border border-cyber-accent/30 bg-cyber-bg/90 backdrop-blur-md shadow-neon-inner;
  }
  
  /* Toast styling */
  .cyber-toast {
    @apply bg-cyber-bg/90 backdrop-blur-md border border-cyber-accent/30 shadow-neon;
  }
  
  /* Sonner Toast 强制深色主题 */
  [data-sonner-toast] {
    background: rgba(15, 23, 42, 0.95) !important;
    border: 1px solid rgba(34, 211, 238, 0.3) !important;
    color: #f1f5f9 !important;
    backdrop-filter: blur(8px) !important;
    box-shadow: 0 10px 15px -3px rgba(34, 211, 238, 0.1) !important;
  }
  
  [data-sonner-toast][data-type="success"] {
    background: rgba(20, 83, 45, 0.2) !important;
    border-color: rgba(34, 197, 94, 0.4) !important;
    color: #bbf7d0 !important;
  }
  
  [data-sonner-toast][data-type="error"] {
    background: rgba(127, 29, 29, 0.2) !important;
    border-color: rgba(239, 68, 68, 0.4) !important;
    color: #fecaca !important;
  }
  
  [data-sonner-toast][data-type="warning"] {
    background: rgba(113, 63, 18, 0.2) !important;
    border-color: rgba(234, 179, 8, 0.4) !important;
    color: #fef08a !important;
  }
  
  [data-sonner-toast][data-type="info"] {
    background: rgba(30, 58, 138, 0.2) !important;
    border-color: rgba(59, 130, 246, 0.4) !important;
    color: #bfdbfe !important;
  }
  
  [data-sonner-toast] [data-title] {
    color: inherit !important;
    font-weight: 500 !important;
  }
  
  [data-sonner-toast] [data-description] {
    color: rgba(148, 163, 184, 0.9) !important;
    font-size: 0.875rem !important;
  }
  
  [data-sonner-toast] [data-button] {
    background: rgb(34, 211, 238) !important;
    color: white !important;
    border: 1px solid rgb(34, 211, 238) !important;
  }
  
  [data-sonner-toast] [data-button]:hover {
    background: rgba(34, 211, 238, 0.8) !important;
  }
  
  [data-sonner-toast] [data-cancel-button] {
    background: rgb(30, 41, 59) !important;
    color: rgb(203, 213, 225) !important;
    border: 1px solid rgb(51, 65, 85) !important;
  }
  
  [data-sonner-toast] [data-cancel-button]:hover {
    background: rgb(51, 65, 85) !important;
  }
  
  [data-sonner-toast] [data-icon] {
    color: inherit !important;
  }
}

/* Animation for text cycling */
@keyframes text-cycle {
  0%, 20% {
    transform: translateY(0%);
  }
  25%, 45% {
    transform: translateY(-25%);
  }
  50%, 70% {
    transform: translateY(-50%);
  }
  75%, 95% {
    transform: translateY(-75%);
  }
  100% {
    transform: translateY(-100%);
  }
}

.animate-text-cycle {
  animation: text-cycle 10s ease-in-out infinite;
}
